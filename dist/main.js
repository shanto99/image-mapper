(()=>{"use strict";class e{constructor(e){this.drawingElement=e,this.svgns="http://www.w3.org/2000/svg",this.mousePosition=this.mousePosition.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.makeDrawing=this.makeDrawing.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.addHandlers=this.addHandlers.bind(this),this.removeHandlers=this.removeHandlers.bind(this),this.svg=document.getElementById("drawing-svg"),this.drawingElement=this.svg,this.drawingElement.onmousedown=this.handleMouseDown}addHandlers(){this.drawingElement.onmousemove=this.handleMouseMove,this.drawingElement.onmouseleave=this.handleMouseLeave,this.drawingElement.onmouseup=this.handleMouseUp,document.onmouseup=this.handleMouseUp}removeHandlers(){this.drawingElement.onmousemove=null,this.drawingElement.onmouseleave=null,this.drawingElement.onmouseup=null,document.onmouseup=null}mousePosition(e){let s=this.drawingElement.getBoundingClientRect();return{x:e.clientX-s.x,y:e.clientY-s.y}}handleMouseDown(e){e.preventDefault(),this.addHandlers(),this.startingPosition=this.mousePosition(e)}handleMouseMove(e){e.preventDefault();let s=this.mousePosition(e);this.makeDrawing(s)}makeDrawing(e){}handleMouseLeave(){console.log("mouseleave"),this.removeHandlers()}handleMouseUp(e){console.log("mouseup"),this.removeHandlers()}}class s extends e{constructor(e){super(e)}handleMouseUp(e){super.handleMouseUp(e),this.rect=null}makeDrawing(e){super.makeDrawing(e),this.rect||(this.rect=document.createElementNS(this.svgns,"rect"),this.svg.appendChild(this.rect));let s={...this.startingPosition},t=e.x-this.startingPosition.x,i=e.y-this.startingPosition.y;(t<0||i<0)&&(t<0&&(s.x=e.x),i<0&&(s.y=e.y)),t=Math.abs(t),i=Math.abs(i),gsap.set(this.rect,{attr:{x:s.x,y:s.y,width:t,height:i,fill:"rgb(0,0,255,0.5)"}})}}class t extends e{constructor(e){super(e)}handleMouseUp(e){super.handleMouseUp(e),this.circle=null}makeDrawing(e){super.makeDrawing(e),this.circle||(this.circle=document.createElementNS(this.svgns,"circle"),this.svg.append(this.circle));let s=Math.abs(e.x-this.startingPosition.x),t=Math.abs(e.y-this.startingPosition.y),i=s>t?s:t;gsap.set(this.circle,{attr:{cy:this.startingPosition.y,cx:this.startingPosition.x,r:i,fill:"rgb(0,0,255,0.5)"}})}}let i=null;const n=document.getElementById("drawing-shapes"),o=document.getElementById("mapping-image");n.addEventListener("click",(function(e){e.stopPropagation(),i="rectangle"===e.target.dataset.tool?new s(o):new t(o)}))})();